# ğŸ¯ VoiceShield User Flow

## For Non-Technical Users (Control Panel)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER JOURNEY                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Visit Website
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Open Browser        â”‚
â”‚  Go to:              â”‚
â”‚  your-app.com        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
Step 2: See Control Panel
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ¨ VoiceShield      â”‚
â”‚  Control Panel       â”‚
â”‚                      â”‚
â”‚  [Start Detection]   â”‚
â”‚                      â”‚
â”‚  How it works:       â”‚
â”‚  â€¢ Mic activated     â”‚
â”‚  â€¢ Real-time AI      â”‚
â”‚  â€¢ Instant alerts    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
Step 3: Click "Start Detection"
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser asks:       â”‚
â”‚  "Allow microphone?" â”‚
â”‚                      â”‚
â”‚  [Block]  [Allow] âœ“  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
Step 4: System Listening
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ™ï¸ Recording Active â”‚
â”‚                      â”‚
â”‚  Speak naturally.    â”‚
â”‚  System listening... â”‚
â”‚                      â”‚
â”‚  [Stop Detection]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
Step 5: Real-Time Analysis
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Live Analysis       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  âœ… "Hello, how      â”‚
â”‚     are you?"        â”‚
â”‚     Safe: 95%        â”‚
â”‚                      â”‚
â”‚  âš ï¸  "Give me your   â”‚
â”‚     credit card"     â”‚
â”‚     Risk: 85%        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
Step 6: Phishing Alert (if detected)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš¨ ALERT! ğŸš¨        â”‚
â”‚                      â”‚
â”‚  PHISHING DETECTED   â”‚
â”‚      85%             â”‚
â”‚                      â”‚
â”‚  Terminate call      â”‚
â”‚  immediately!        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
Step 7: Stop Detection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Click:              â”‚
â”‚  [Stop Detection]    â”‚
â”‚                      â”‚
â”‚  Review transcripts  â”‚
â”‚  and alerts          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… DONE! No technical knowledge needed!
```

---

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TECHNICAL FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User's Browser
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Control Panel         â”‚
â”‚  (control.html)        â”‚
â”‚                        â”‚
â”‚  JavaScript:           â”‚
â”‚  â€¢ MediaRecorder API   â”‚
â”‚  â€¢ WebSocket Client    â”‚
â”‚  â€¢ Audio Chunking      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ HTTPS + WebSocket
        â”‚
        â†“
Cloud Platform (Render/Railway/Heroku)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FastAPI Backend       â”‚
â”‚  (backend/app.py)      â”‚
â”‚                        â”‚
â”‚  Endpoints:            â”‚
â”‚  â€¢ /control            â”‚
â”‚  â€¢ /upload_chunk       â”‚
â”‚  â€¢ /ws/monitoring      â”‚
â”‚                        â”‚
â”‚  Processing:           â”‚
â”‚  â€¢ In-memory (no disk) â”‚
â”‚  â€¢ Whisper (tiny)      â”‚
â”‚  â€¢ DistilBERT          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ API Calls
        â”‚
        â†“
Supabase
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database              â”‚
â”‚  â€¢ chunks table        â”‚
â”‚  â€¢ call metadata       â”‚
â”‚                        â”‚
â”‚  Storage               â”‚
â”‚  â€¢ audio-chunks bucket â”‚
â”‚  â€¢ WAV files           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment vs Local Development

### Local Development
```
Developer's Computer
â”œâ”€â”€ Terminal 1: Backend Server
â”‚   â””â”€â”€ uvicorn backend.app:app --reload
â”‚
â”œâ”€â”€ Browser: Control Panel
â”‚   â””â”€â”€ http://127.0.0.1:8000/control
â”‚
â””â”€â”€ Optional: Terminal 2 for advanced features
    â””â”€â”€ python main.py
```

### Production Deployment
```
Cloud Platform (Render)
â”œâ”€â”€ Auto-starts backend on deploy
â”‚   â””â”€â”€ Runs: uvicorn backend.app:app
â”‚
â””â”€â”€ Public URL: https://your-app.onrender.com

Users
â””â”€â”€ Just visit: https://your-app.onrender.com
    â””â”€â”€ Control Panel loads automatically!
```

---

## Key Differences: Before vs After

### Before (Technical Users Only)
```
1. Install Python âŒ
2. Create virtual environment âŒ
3. Install dependencies âŒ
4. Configure Supabase âŒ
5. Open terminal âŒ
6. Run: uvicorn backend.app:app âŒ
7. Open another terminal âŒ
8. Run: python main.py âŒ
9. Type: start âŒ
10. Use the system âœ…
```

### After (Anyone Can Use)
```
1. Visit website âœ…
2. Click "Start Detection" âœ…
3. Allow microphone âœ…
4. Use the system âœ…
```

**10 steps â†’ 4 steps!**
**Technical knowledge required â†’ None!**

---

## Data Flow

```
User speaks
    â†“
Browser captures audio (MediaRecorder)
    â†“
Audio chunked every 10 seconds
    â†“
Chunk sent to backend via HTTP POST
    â†“
Backend processes in memory:
    1. Upload to Supabase Storage
    2. Transcribe with Whisper
    3. Classify with DistilBERT
    4. Calculate phishing score
    5. Store metadata in database
    â†“
Results sent back via WebSocket
    â†“
Browser displays:
    â€¢ Transcript
    â€¢ Risk level (Safe/Suspicious/Critical)
    â€¢ Alert if phishing detected
```

---

## Security Flow

```
Environment Variables (Deployment)
    â†“
SUPABASE_URL â”€â”€â”€â”€â”
SUPABASE_KEY â”€â”€â”€â”€â”¤
                 â†“
            Backend loads credentials
                 â†“
            Connects to Supabase
                 â†“
            Processes audio securely
                 â†“
            No credentials in code âœ…
            No temp files on disk âœ…
            HTTPS required âœ…
```

---

## Comparison: Old vs New Storage

### Old (Disk-based)
```
Audio received
    â†“
Save to temp/chunk_123.wav âŒ
    â†“
Process file
    â†“
Upload to Supabase
    â†“
Delete temp/chunk_123.wav

Problems:
â€¢ Fails on read-only filesystems
â€¢ Fails on ephemeral storage
â€¢ Slower (disk I/O)
â€¢ Cleanup issues
```

### New (In-memory)
```
Audio received
    â†“
Store in BytesIO (RAM) âœ…
    â†“
Process from memory
    â†“
Upload to Supabase
    â†“
Auto-cleanup (garbage collection)

Benefits:
â€¢ Works on any platform
â€¢ Faster (no disk I/O)
â€¢ Automatic cleanup
â€¢ Cloud-ready
```

---

## User Experience Comparison

### Technical User (main.py)
```
Terminal Output:
ğŸ›¡ï¸  Voice Phishing Detection System
==================================================
Backend URL: http://127.0.0.1:8000
Chunk Duration: 5s
==================================================
ğŸ”§ Initializing system components...
ğŸ™ï¸  LinphoneCallRecorder initialized
ğŸ“ Starting call recording: call_20260216_134432
ğŸ“Š Chunk 0 processed - Phishing: 4.24%
ğŸ“Š Chunk 1 processed - Phishing: 35.08%
```

### Non-Technical User (Control Panel)
```
Browser Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VoiceShield Control Panel   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ System Online âœ…            â”‚
â”‚                             â”‚
â”‚ [Start Detection]           â”‚
â”‚                             â”‚
â”‚ Live Analysis:              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ "Hello, how are you?"   â”‚ â”‚
â”‚ â”‚ Safe: 95%               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Much more user-friendly!** ğŸ‰
